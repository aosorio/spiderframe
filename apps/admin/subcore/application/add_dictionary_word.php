<?php define("TO_ROOT", "../../../..");  header("Content-Type: application/json");require_once TO_ROOT . "/core/includes/main.inc.php";$returnData = Array();$id = ( isset( $_POST["id"] ) ) ? $_POST["id"] : false;  $id = ( !$id && isset($_GET["id"]) ) ? $_GET["id"] : $id;$task = ( isset( $_POST["task"] ) ) ? $_POST["task"] : false;  $task = ( !$section && isset($_GET["task"]) ) ? $_GET["task"] : $task; $section = ( isset( $_POST["section"] ) ) ? $_POST["section"] : false;  $section = ( !$section && isset($_GET["section"]) ) ? $_GET["section"] : $section; $sections = ( isset( $_POST["sections"] ) ) ? $_POST["sections"] : false;  $sections = ( !$sections && isset($_GET["sections"]) ) ? $_GET["sections"] : $sections; $language = ( isset( $_POST["language"] ) ) ? $_POST["language"] : false; $language = ( !$language && isset($_GET["language"]) ) ? $_GET["language"] : $language; $system_value = ( isset( $_POST["system_value"] ) ) ? $_POST["system_value"] : false;  $system_value = ( !$system_value && isset($_GET["system_value"]) ) ? $_GET["system_value"] : $system_value; $translate_value = ( isset( $_POST["translate_value"] ) ) ? $_POST["translate_value"] : false;  $translate_value = ( !$translate_value && isset($_GET["translate_value"]) ) ? $_GET["translate_value"] : $translate_value; $token = ( isset( $_POST["token"] ) ) ? $_POST["token"] : false;  	$token = ( !$token && isset( $_GET["token"] ) ) ? $_GET["token"] : $token;  $token = ( !$token && isset( $_SESSION["token"] ) ) ? $_SESSION["token"] : $token;if($token){	if(Functions::__hasPermissionByToken("dictionary", "add_dictionary_word", $token))	{		if($language)		{			if($id || $section)			{				if($translate_value)				{					$Dictionary = Dictionary::getInstance($language);					$Dictionary->load();										if($task == "edit")					{						$Dictionary->setSystemValue($system_value, $id);						if($system_value)						{							$Dictionary->setTranslateValue($translate_value, $id);						}					} else if($task == "add"){						$Dictionary->addNewLine($section, $system_value, $translate_value);					}										if($Dictionary->save())					{						$returnData["success"] = "1";						$returnData["language"] = $language;						$returnData["reason"] = "SAVE_DICTIONARY_OK";					} else {						$returnData["success"] = "0";						$returnData["language"] = $language;						$returnData["reason"] = "NOT_SAVE_DICTIONARY";					}				} else {					$returnData["success"] = "0";					$returnData["reason"] = "NOT_TRANSLATE_VALUE";				}			} else {				$returnData["success"] = "0";				$returnData["reason"] = "NOT_ID";			}		} else {			$returnData["success"] = "0";			$returnData["reason"] = "NOT_LANGUAGE";		}	} else {		$returnData["success"] = "0";		$returnData["reason"] = "NOT_HAS_PERMISSION";	}} else {	$returnData["success"] = "0";	$returnData["reason"] = "INVALID_TOKEN";}echo json_encode($returnData);