<?php define("TO_ROOT", "../..");  require_once TO_ROOT . "/core/includes/main.inc.php";  $Page = new Template("Module");    /* ---------------- <<<< Assert User Permissions >>>> ---------------------------------------------------------------------*/  /** *  if(!System::__assertLoginType($_SESSION["login_type"]) && !System::__hasPermission("user", "add_user"))  {  	System::__sessionDestroy();  	$Page->setOnReady("__showMessage","{'message':'Sorry you dont have permission','options':{'OK':function(){__goToPage('index.php')}}}");  	$Page->goToPage();  }  /* ---------------- <<<< End Assert User Permissions >>>> ----------------------------------------------------------------*/      /* ---------------- <<<< Load Class Models >>>> --------------------------------------------------------------------------*/  $cat_module_id = (isset($_GET["cat_module_id"])) ? $_GET["cat_module_id"] : 2 ;    $Login = Login::getInstance(2);  $Login->load();    $Module = Module::getInstance($cat_module_id);  $Module->load();    $Tabs		= new Tabs("Tabs");  $Table	= new Table("Table");  $Form 	= new Form("Detail");  $Detail 	= new Detail("Detail");      /* ---------------- <<<< End Load Class Models >>>> ---------------------------------------------------------------------*/    /* ---------------- <<<< Set Genarl Variables >>>> ----------------------------------------------------------------------*/  Functions::__getNext("cat_module", $cat_module_id, $next, $previous);  //$Page->setContainerClass("table_view");  /* ---------------- <<<< End Set Genarl Variables  >>>> -----------------------------------------------------------------*/    /* ---------------- <<<< Configure Rows >>>> ----------------------------------------------------------------------------*/  $Table->setTableRows($Module->getModulePermissions());  $Table->setTableTitle("Module permission list");  $Table->setRow($Module);    //$Table->moveColumnToStart("description");    $Tabs->setRow($Module);    $Table->setLinkedColumn("permission_context", TO_ROOT . "/apps/admin/module_permission.php?cat_module_permission_id=cat_module_permission_id");  $Table->setLinkedColumn("permission", TO_ROOT . "/apps/admin/module_permission.php?cat_module_permission_id=cat_module_permission_id");      $Detail->setRow($Module);  $Detail->insertField("Status", $Module->getStatus());  $Detail->setLinkedField("module", TO_ROOT . "/apps/admin/module.php?cat_module_id=cat_module_id");      $Form->setRow($Login);  $Form->showField("active");  /* ---------------- <<<< End Configure Rows   >>>> ----------------------------------------------------------------------*/      /* ---------------- <<<< Configure PHP Antions >>>> ---------------------------------------------------------------------*/  $Detail->addAction("Add permission", TO_ROOT . "/apps/admin/add_module_permission.php?cat_module_id=cat_module_id");  $Detail->addAction("Edit", TO_ROOT . "/apps/admin/edit_module.php?cat_module_id=cat_module_id");  $Detail->addActiveAction("cat_module-active-cat_module_id-active");    $Table->addAction("edit", TO_ROOT . "/apps/admin/module_permission.php?cat_module_permission_id=cat_module_permission_id");  $Table->addAction("active");    $Table->setRowProperty("active", "class", "center");  $Table->setColumnProperty("active", "value", "Status");  $Table->setConditionColumnValue("active", 1, "Active", "Inactive");  $Table->setRowProperty("cat_module_permission_id", "class", "center");    $Page->addGeneralAction("Previuos", TO_ROOT ."/apps/admin/module.php?cat_module_id=" .  $previous, false);  $Page->addGeneralAction("Next", TO_ROOT ."/apps/admin/module.php?cat_module_id=" .  $next, false);  /* ---------------- <<<< End Configure PHP Actions >>>> -----------------------------------------------------------------*/      /* ---------------- <<<< Set Rows on Template >>>> ----------------------------------------------------------------------*/  $Page->setDetail($Detail);  $Page->setTable($Table);  $Page->setForm($Form);  $Page->setTab($Tabs);  /* ---------------- <<<< End Set Row on Template   >>>> -----------------------------------------------------------------*/      /* ---------------- <<<< Configure Js Actions >>>> ----------------------------------------------------------------------*/  $Page->setOnReady("__activeAction");  /* ---------------- <<<< End Configure Js Actions >>>> -----------------------------------------------------------------*/      /* ---------------- <<<< Set Menus >>>> --------------------------------------------------------------------------------*/  $Page->setSecondaryMenu("admin_permissions");  /* ---------------- <<<< End Set Menus >>>> ----------------------------------------------------------------------------*/      /* ---------------- <<<< Configure CSS Theme >>>> ----------------------------------------------------------------------*/  $Page->addCssLink(TO_ROOT . "/apps/subcore/style/forms.css");  $Page->addCssLink(TO_ROOT . "/apps/subcore/style/tabs.css");  $Page->addCssLink(TO_ROOT . "/apps/subcore/style/tables.css");  /* ---------------- <<<< End Configure CSS Theme >>>> ------------------------------------------------------------------*/      /* ---------------- <<<< Configure JS Scripts >>>> ---------------------------------------------------------------------*/  $Page->addJsLink(TO_ROOT . "/apps/admin/subcore/scripts/script.add_module.js");  /* ---------------- <<<< End Configure JS Scripts >>>> -----------------------------------------------------------------*/     /* ---------------- <<<< Configure Template and Display >>>> -----------------------------------------------------------*/  $Page->display();  /* ---------------- <<<< End Configure Template and Display >>>> -------------------------------------------------------*/